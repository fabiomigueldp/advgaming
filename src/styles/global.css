@tailwind base;

@layer base {
  :root {
    /* Adventury Gaming Brand System */
    --font-var-settings-headings: "wght" 700, "opsz" 9;

    /* Primary: Bold Gaming Red (#DC2626 - red-600) */
    --color-primary: 220 38 38;
    /* Secondary: Deep Charcoal */
    --color-secondary: 23 23 23;
    /* Accent: Orange for highlights */
    --color-accent: 251 146 60;
    /* System colors */
    --color-warning: 245 158 11;
    --color-danger: 239 68 68;
    --color-success: 34 197 94;
    --color-info: 59 130 246;
    /* Neutrals */
    --color-dark: 17 17 17;
    --color-light: 250 250 250;

    /* Semantic tokens */
    --bg: 250 250 250;
    --fg: 17 17 17;
    --muted-bg: 244 244 245;
    --muted-fg: 82 82 82;
    --card-bg: 255 255 255;
    --card-fg: 23 23 23;
    --card-border: 229 231 235;
    --border: 229 231 235;
    --primary: var(--color-primary);
    --primary-fg: 255 255 255;
    --nav-on-light: 17 17 17;
    --nav-on-dark: 255 255 255;
    --nav-hover: 17 17 17;
    --shadow-color: 0 0 0;

    /* Spacing & Layout */
    --spacing: 1rem;
    --radius: 0.75rem;
    --radius-sm: 0.5rem;
    --radius-lg: 1rem;
    --w-xl: 75rem;
    --w-lg: 65rem;
    --w-md: 55rem;
    --w-sm: 40rem;

    /* Video Player */
    --plyr-color-main: theme(colors.primary);
    --plyr-control-padding: 2rem;
    --plyr-control-spacing: 1rem;
    --plyr-control-radius: 0.75rem;

    /* Popper/Tooltips */
    --popper-theme-background-color: theme(colors.primary);
    --popper-theme-background-color-hover: theme(colors.primary);
    --popper-theme-text-color: theme(colors.light);
    --popper-theme-border-width: 0px;
    --popper-theme-border-style: solid;
    --popper-theme-border-radius: 0.5rem;
    --popper-theme-padding: 0.5rem;
    --popper-theme-box-shadow: 0 4px 20px -4px rgba(0, 0, 0, 0.3);
  }

  /* Light theme */
  [data-theme="light"] {
    --color-primary: 220 38 38;
    --color-secondary: 23 23 23;
    --color-accent: 251 146 60;
    --color-warning: 245 158 11;
    --color-danger: 239 68 68;
    --color-success: 34 197 94;
    --color-info: 59 130 246;
    --color-dark: 17 17 17;
    --color-light: 250 250 250;
    --bg: 250 250 250;
    --fg: 17 17 17;
    --muted-bg: 244 244 245;
    --muted-fg: 82 82 82;
    --card-bg: 255 255 255;
    --card-fg: 23 23 23;
    --card-border: 229 231 235;
    --border: 229 231 235;
    --primary: var(--color-primary);
    --primary-fg: 255 255 255;
    --nav-on-light: 17 17 17;
    --nav-on-dark: 255 255 255;
    --nav-hover: 0 0 0;
    --shadow-color: 15 23 42;
  }

  /* Dark theme (default gaming feel) */
  [data-theme="dark"] {
    --color-primary: 239 68 68;
    --color-secondary: 38 38 38;
    --color-accent: 251 146 60;
    --color-warning: 245 158 11;
    --color-danger: 239 68 68;
    --color-success: 34 197 94;
    --color-info: 59 130 246;
    --color-dark: 10 10 10;
    --color-light: 250 250 250;
    --bg: 10 10 10;
    --fg: 245 245 245;
    --muted-bg: 24 24 27;
    --muted-fg: 161 161 170;
    --card-bg: 17 17 19;
    --card-fg: 245 245 245;
    --card-border: 39 39 42;
    --border: 39 39 42;
    --primary: var(--color-primary);
    --primary-fg: 255 255 255;
    --nav-on-light: 17 17 17;
    --nav-on-dark: 255 255 255;
    --nav-hover: 255 255 255;
    --shadow-color: 0 0 0;
  }
}

/* UTILITY CLASSES */

.text-gradient {
  background: linear-gradient(
    135deg,
    rgb(var(--color-primary)) 0%,
    rgb(var(--color-accent)) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.shadow-premium {
  box-shadow:
    0 20px 40px -12px rgba(0, 0, 0, 0.2),
    0 0 0 1px rgba(0, 0, 0, 0.05);
}

.shadow-card {
  box-shadow: 0 10px 30px -20px rgb(var(--shadow-color) / 0.6);
}

.shadow-glow-red {
  box-shadow: 0 0 40px -10px rgba(220, 38, 38, 0.4);
}

/* Product badge styles */
.badge {
  @apply inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-[0.7rem] font-semibold uppercase tracking-wide;
  --badge-color: var(--color-primary);
  border: 1px solid rgb(var(--badge-color) / 0.25);
  background-color: rgb(var(--badge-color) / 0.12);
  color: rgb(var(--badge-color));
}

.badge-free {
  --badge-color: var(--color-success);
}

.badge-basic {
  --badge-color: var(--color-info);
}

.badge-custom {
  --badge-color: var(--color-accent);
}

.badge-popular {
  --badge-color: var(--color-primary);
}

/* Price tag */
.price-tag {
  @apply text-3xl font-bold tracking-tight;
}

.price-tag-sm {
  @apply text-xl font-bold tracking-tight;
}

/* Card component base */
.card {
  @apply relative rounded-lg border p-6 transition-all duration-200;
  background-color: rgb(var(--card-bg));
  border-color: rgb(var(--card-border));
  color: rgb(var(--card-fg));
  box-shadow: 0 12px 30px -24px rgb(var(--shadow-color) / 0.6);
}

.card:hover {
  @apply -translate-y-1;
  border-color: rgb(var(--color-primary) / 0.25);
}

.card-elevated {
  @apply shadow-card;
}

html {
  font-size: 16px;
}

body {
  --toastify-color-light: theme(colors.light);
  --toastify-color-dark: theme(colors.dark);
  --toastify-color-info: theme(colors.info);
  --toastify-color-success: theme(colors.success);
  --toastify-color-warning: theme(colors.warning);
  --toastify-color-error: theme(colors.danger);
  .Toastify {
    z-index: 9999999999;
  }
}

/* SURFACES - Adventury Gaming Design System */

.surface-base {
  background-color: rgb(var(--bg));
  color: rgb(var(--fg));
  .shape-fill {
    fill: rgb(var(--bg));
  }
}

.surface-primary {
  @apply bg-primary text-white;
  a:not([class]) {
    @apply text-white underline;
  }
}

.surface-secondary {
  @apply bg-secondary text-light;
  a:not([class]) {
    @apply text-light;
  }
}

.surface-accent {
  @apply bg-accent text-dark;
  a:not([class]) {
    @apply text-dark;
  }
}

.surface-dark {
  @apply text-light;
  background-color: rgb(var(--color-dark));
}

[data-theme="light"] .surface-dark {
  background-color: rgb(var(--muted-bg));
  color: rgb(var(--fg));
}

.surface-darker {
  @apply text-light;
  background-color: rgb(0 0 0);
}

[data-theme="light"] .surface-darker {
  background-color: rgb(var(--muted-bg));
  color: rgb(var(--fg));
}

/* Hero dark - always dark regardless of theme */
.hero-dark {
  @apply text-light;
  background-color: rgb(var(--color-dark));
}

[data-theme="light"] .hero-dark {
  @apply text-light;
  background-color: rgb(var(--color-dark));
}

.surface-muted {
  background-color: rgb(var(--muted-bg));
  color: rgb(var(--fg));
}

.surface-overlay {
  background-color: rgb(var(--card-bg));
  color: rgb(var(--card-fg));
}

.surface-footer {
  background-color: rgb(var(--muted-bg));
  color: rgb(var(--fg));
}

.surface-light {
  @apply bg-light text-dark;
}

.surface-warning {
  @apply bg-warning text-dark;
}

.surface-danger {
  @apply bg-danger text-white;
}

.surface-success {
  @apply bg-success text-white;
}

.surface-info {
  @apply bg-info text-white;
}

/* BASE ELEMENTS */
body {
  @screen xs {
    --spacing: 2rem;
  }
  font-family:
    "DM Sans Variable", "Adjusted Arial Fallback", "arial", sans-serif;
  --container-spacing: calc(var(--spacing) * 2);
  --grid-spacing: calc(var(--spacing) / 2);
}

.container {
  width: min(100% - var(--container-spacing), var(--w-md));
  @apply mx-auto;
  &-xl {
    width: min(100% - var(--container-spacing), var(--w-xl));
    @apply mx-auto;
  }

  &-lg {
    width: min(100% - var(--container-spacing), var(--w-lg));
    @apply mx-auto;
  }
  &-md {
    width: min(100% - var(--container-spacing), var(--w-md));
    @apply mx-auto;
  }
  &-sm {
    width: min(100% - var(--container-spacing), var(--w-sm));
    @apply mx-auto;
  }
  &-full {
    width: calc(100% - var(--container-spacing));
    @apply mx-auto;
  }
}

/* TYPOGRAFY */

@font-face {
  font-family: "Adjusted Arial Fallback";
  src: local(Arial);
  size-adjust: 106%;
  ascent-override: normal;
  descent-override: normal;
  line-gap-override: 10%;
}

.font-thin {
  font-variation-settings: "wght" 100;
}
.font-extralight {
  font-variation-settings: "wght" 200;
}
.font-light {
  font-variation-settings: "wght" 300;
}
.font-normal {
  font-variation-settings: "wght" 400;
}
.font-medium {
  font-variation-settings: "wght" 500;
}
.font-semibold {
  font-variation-settings: "wght" 600;
}
.font-bold {
  font-variation-settings: "wght" 700;
}
.font-extrabold {
  font-variation-settings: "wght" 800;
}
.font-black {
  font-variation-settings: "wght" 900;
}
.title {
  @apply text-4xl tracking-tighter sm:text-4xl lg:text-5xl xl:text-6xl;
  text-wrap: balance;
  font-variation-settings: var(--font-var-settings-headings);

  &-md {
    @apply text-2xl tracking-tighter sm:text-4xl md:text-5xl lg:text-5xl;
    text-wrap: balance;
    font-variation-settings: var(--font-var-settings-headings);
  }
  &-sm {
    @apply text-3xl tracking-tighter sm:text-4xl;
    text-wrap: balance;
    font-variation-settings: var(--font-var-settings-headings);
  }
  &-xs {
    @apply text-xl tracking-tighter sm:text-2xl;
    text-wrap: balance;
    font-variation-settings: var(--font-var-settings-headings);
  }
}

.subtitle {
  @apply text-2xl;
}

.text-overline {
  @apply uppercase tracking-widest;
}

.balance {
  text-wrap: balance;
}

.lead {
  @apply text-lg;
}

/* MARKDOWN HTML */
.richtext {
  a:not([class]) {
    @apply font-semibold;
    padding-bottom: 0.1em;
    background: linear-gradient(90deg, currentColor, currentColor) no-repeat
      right bottom / 0 var(--bg-h);
    transition: background-size 350ms;
    --bg-h: 0.1em;

    &:where(:hover, :focus-visible) {
      background-size: 100% var(--bg-h);
      background-position-x: left;
    }
  }
  &:not(.dense) {
    * + p {
      @apply pt-6;
    }
  }

  * + *:is(h2, h3, h4, h5, h6) {
    @apply pt-8;
  }
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-variation-settings: var(--font-var-settings-headings);
    @apply leading-snug tracking-tighter;
  }

  h2 {
    @apply text-3xl font-extrabold sm:text-4xl;
    text-wrap: balance;
    strong {
      @apply block text-xs font-light uppercase tracking-widest;
    }
  }

  h3 {
    @apply text-2xl font-extrabold sm:text-3xl;
    text-wrap: balance;
  }
  h4 {
    @apply text-xl font-bold sm:text-2xl;
    text-wrap: balance;
  }
  h5 {
    @apply text-lg font-bold leading-none sm:text-xl;
    text-wrap: balance;
  }

  h6 {
    @apply text-lg font-bold leading-none;
    text-wrap: balance;
  }
  p {
    text-wrap: balance;
  }

  table {
    @apply my-8 w-full;
  }

  code {
    @apply rounded-md bg-gray-600 bg-opacity-20 px-1 py-0.5;
  }
  pre {
    @apply my-4 inline-block w-full max-w-full rounded-md p-4;
  }
  pre > code {
    all: unset;
  }
  blockquote {
    @apply mx-0 my-8 border-l-4 border-primary py-0 pl-8 pr-0 text-2xl font-semibold italic;
  }
  ul:not([class]) {
    @apply list-disc;
  }
  ol:not([class]) {
    @apply list-decimal;
  }

  ul:not([class]),
  ol:not([class]) {
    @apply my-8 ml-6 list-outside text-lg leading-tight;

    li {
      @apply py-2;
      text-wrap: balance;
      &::marker {
        @apply text-primary;
      }
    }
    ul,
    ol {
      @apply my-1 ml-4;
    }
  }
}

/* BUTTONS */

.btn {
  @apply relative inline-flex items-center justify-center gap-2 overflow-hidden whitespace-nowrap px-6 py-3 text-sm font-semibold outline-offset-4 transition-all duration-200 hover:shadow-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary/60 disabled:pointer-events-none disabled:opacity-50 disabled:grayscale;
  border-radius: var(--radius);

  &:before {
    content: "";
    border-radius: var(--radius);
    @apply origin-bottom-right opacity-10;
    @apply pointer-events-none absolute inset-0 isolate z-20 overflow-hidden bg-current transition-transform duration-300;
    transform: translateX(-100%);
  }

  &:hover {
    &:before {
      transform: translateX(0%);
    }
  }

  &-primary {
    @apply bg-primary text-white hover:bg-primary/90;
  }

  &-secondary {
    border: 2px solid rgb(var(--color-primary)) !important;
    background-color: white !important;
    color: rgb(var(--color-primary)) !important;

    &:hover {
      background-color: rgb(var(--color-primary) / 0.1) !important;
    }
  }

  /* Triple specificity guarantee */
  .btn.btn-secondary {
    background-color: white !important;
  }

  &-outline {
    border: 2px solid rgb(var(--border));
    color: rgb(var(--fg));
    background-color: transparent;

    &:hover {
      background-color: rgb(var(--muted-bg));
    }
  }

  &-outline-primary {
    border: 2px solid rgb(var(--color-primary)) !important;
    color: rgb(var(--color-primary)) !important;
    background-color: white !important;

    &:hover {
      background-color: rgb(var(--color-primary) / 0.1) !important;
    }
  }

  /* Force white background for buttons in surface-primary context */
  .surface-primary &-secondary,
  .surface-primary &-outline-primary {
    background-color: white !important;
  }

  &-ghost {
    background-color: transparent;

    &:hover {
      background-color: rgb(var(--muted-bg));
    }
  }

  &-icon {
    @apply px-3;
  }

  &-sm {
    @apply px-4 py-2 text-xs;
  }

  &-lg {
    @apply px-8 py-4 text-base;
  }

  &-square {
    @apply flex min-w-[14rem] gap-2 border px-4 py-3;
    border-radius: var(--radius-sm);
  }
}

.btn-replace {
  overflow: hidden;
  position: relative;
  display: inline-block;

  span {
    display: inline-block;
    transition: transform 0.3s cubic-bezier(0.76, 0, 0.24, 1);
  }

  &:after,
  &:before {
    content: "";
    position: absolute;
    width: 100%;
    left: 0;
  }
  &:before {
    @apply bg-primary;
    height: 2px;
    bottom: 0;
    transform-origin: 100% 50%;
    transform: scaleX(0);
    transition: transform 0.3s cubic-bezier(0.76, 0, 0.24, 1);
  }
  &:after {
    content: attr(data-replace);
    height: 100%;
    top: 0;
    transform-origin: 100% 50%;
    transform: translate3d(0, 200%, 0);
    transition: transform 0.3s cubic-bezier(0.76, 0, 0.24, 1);
    /*  @apply text-primary; */
  }
  &:hover {
    &:before {
      transform-origin: 0% 50%;
      transform: scaleX(1);
    }
    &:after {
      transform: translate3d(0, 0, 0);
    }
    span {
      transform: translate3d(0, -200%, 0);
    }
  }
}

/* HELPERS */
.noise {
  @apply relative;
  &:after {
    content: "";
    @apply pointer-events-none absolute inset-0 isolate z-20 overflow-hidden opacity-100;
    mix-blend-mode: overlay;
    background-blend-mode: overlay;
    filter: url(#noiseFilter);
  }
}

.rounded {
  border-radius: var(--radius);
  .noise {
    &:after {
      border-radius: var(--radius);
    }
  }
}

.hide-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
  &::-webkit-scrollbar {
    display: none;
  }
}

/* ANIMATIONS */
@media screen and (prefers-reduced-motion: no-preference) {
  .fade-up {
    @apply ease-in;
    transition: all 0.5s var(--animation-delay, 0ms);
  }

  .fade-in {
    transition: opacity 0.5s var(--animation-delay, 0ms);
  }

  .is-inactive {
    &.fade-up,
    .fade-up {
      @apply scale-95;
    }
  }

  .out-of-screen {
    &.fade-up,
    .fade-up {
      @apply scale-95 opacity-90;
    }
    &.fade-in,
    .fade-in {
      @apply opacity-0;
    }
  }
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
/* NAVIGATION */

.nav {
  @apply transition-all duration-300;
  --nav-fg: var(--fg);
  --nav-bg: var(--bg);
  --nav-border: var(--border);
  color: rgb(var(--nav-fg));
  background-color: rgb(var(--nav-bg) / var(--nav-bg-opacity, 0));

  &-on-dark {
    /* For dark hero backgrounds: always use WHITE text */
    --nav-fg: 255 255 255;
  }
  &-on-light {
    /* For light hero backgrounds: always use DARK text */
    --nav-fg: 17 17 17;
  }
  &-inverse {
    --nav-fg: 255 255 255;
    --nav-bg: 17 17 17;
  }
}

.btn-to-top {
  @apply pointer-events-none scale-90 opacity-0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

[data-is-top="true"] {
  .nav {
    transition:
      transform 0.5s ease-out,
      background-color 0s 0s ease-out,
      color 0.5s ease-out;
  }
}

[data-is-top="false"] {
  .nav {
    transition:
      transform 0.5s ease-out,
      background-color 0.3s ease-out,
      color 0.3s ease-out;
    --nav-bg-opacity: 0.92;
    /* Reset to theme default when scrolled */
    --nav-fg: var(--fg);

    &-on-dark,
    &-on-light,
    &-inverse {
      /* When scrolled, use theme default color */
      --nav-fg: var(--fg);
    }
  }
  .nav__grid {
    @apply h-14;
  }

  .btn-to-top {
    @apply pointer-events-auto scale-100 opacity-100;
  }
}

[data-is-scrolling-up="false"][data-is-top="false"] {
  .nav {
    @apply -translate-y-full;
  }
}

.attribution {
  @apply opacity-0 transition-all duration-1000;
}

[data-is-bottom="false"] {
  .attribution {
    @apply opacity-0;
  }
}

[data-is-bottom="true"] {
  .attribution {
    @apply opacity-100 delay-500;
  }
}

/* POPPER */

.popper {
  transition: background 250ms ease-in-out;
  background: var(--popper-theme-background-color);
  padding: var(--popper-theme-padding);
  color: var(--popper-theme-text-color);
  border-radius: var(--popper-theme-border-radius);
  border-width: var(--popper-theme-border-width);
  border-style: var(--popper-theme-border-style);
  border-color: var(--popper-theme-border-color);
  box-shadow: var(--popper-theme-box-shadow);
  z-index: v-bind(zIndex);
}

.popper:hover,
.popper:hover > #arrow::before {
  background: var(--popper-theme-background-color-hover);
}

/* FORMS */

input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
  -webkit-text-fill-color: theme(colors.primary);
  transition: background-color 5000s ease-in-out 0s;
}
